#!/bin/bash
cd ./../deps/
chmod -R 755 libssh
chmod -R 755 google-breakpad

unamestr=$(uname)

if [[ "$unamestr" == 'Linux' ]]; then

#build libsssh only on linux
cd ./libssh
sh ./configure  --with-openssl --with-libz
make
sudo make install

cd ./../

if ! type "aclocal-1.14" > /dev/null; then
cd ./../vagrant-provision
chmod +x build_automake.sh
./build_automake.sh
cd ./../deps
fi

cd ./google-breakpad
./configure && make
sudo make install

else

cd ./google-breakpad/
xcodebuild -sdk macosx10.9 -project src/client/mac/Breakpad.xcodeproj -configuration Release -target Breakpad ARCHS=x86_64 ONLY_ACTIVE_ARCH=YES MACOSX_DEPLOYMENT_TARGET=10.9 GCC_VERSION=com.apple.compilers.llvm.clang.1_0

fi



